<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0" />
<title>–†–µ–¥–∞–∫—Ç–æ—Ä ¬´–ù–∞–π–¥–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞¬ª</title>

<style>
/* ===== –±–∞–∑–æ–≤—ã–π UI —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ ===== */
:root{
  --bg:#0b1020;
  --panel:rgba(20,24,40,.82);
  --line:rgba(255,255,255,.14);
  --txt:rgba(255,255,255,.92);
  --muted:rgba(255,255,255,.65);
  --btn:#2d6cdf;
  --btn2:#16a34a;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--txt);}
.wrap{display:grid;grid-template-columns:360px 1fr;height:100%}

/* ===== –ø–∞–Ω–µ–ª—å ===== */
.panel{
  background:var(--panel);
  border-right:1px solid var(--line);
  padding:14px;
  overflow:auto;
  backdrop-filter:blur(8px);
}
.panel h1{font-size:16px;margin:0 0 12px}
.row{margin:10px 0}
label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
input,select,textarea{
  width:100%;padding:10px;border-radius:10px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  color:var(--txt)
}
input[type=range]{padding:0}
textarea{min-height:80px;resize:vertical}
.two{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
button{border:0;border-radius:10px;padding:10px 12px;cursor:pointer;color:#fff;font-weight:700}
.b1{background:var(--btn)}
.b2{background:var(--btn2)}
.b3{background:rgba(255,255,255,.12);border:1px solid var(--line);color:var(--txt)}

.codeBox{
  height:260px;
  font-family:ui-monospace,Menlo,Consolas,monospace;
  font-size:12px;
}

/* ===== —Å—Ü–µ–Ω–∞ ===== */
.stage{
  position:relative;
  background:
    linear-gradient(0deg,rgba(255,255,255,.04),rgba(255,255,255,.04)),
    repeating-linear-gradient(45deg,rgba(255,255,255,.035) 0 12px,rgba(255,255,255,.02) 12px 24px);
  overflow:hidden;
}

/* UI –ø–æ–≤–µ—Ä—Ö —Å—Ü–µ–Ω—ã */
.progBadge{
  position:absolute;right:14px;top:14px;z-index:20;
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.18);
  padding:6px 10px;border-radius:999px;font-size:12px
}
.centerTask{
  position:absolute;left:50%;top:18px;transform:translateX(-50%);
  background:rgba(0,0,0,.42);
  border:1px solid rgba(255,255,255,.18);
  border-radius:14px;
  padding:10px 14px;
  font-weight:700;
  pointer-events:none;
}
.hintBtn{
  position:absolute;right:64px;top:12px;
  width:38px;height:38px;border-radius:12px;
  background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.18);
  cursor:pointer;font-size:18px
}

/* –ø–µ—Ä—Å–æ–Ω–∞–∂ */
.target{
  position:absolute;
  width:46px;height:46px;
  cursor:pointer;
  z-index:25;
}
.target img{width:100%;height:100%;object-fit:contain}

/* –∞–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes softFade{from{opacity:0;transform:scale(.96)}to{opacity:1;transform:scale(1)}}
.fx-softfade{animation:softFade var(--dur,1100ms) ease-out}

@keyframes hintPulse{
  0%{transform:scale(1);opacity:1}
  50%{transform:scale(1.25);opacity:1}
  100%{transform:scale(1);opacity:.4}
}
.fx-hint img{animation:hintPulse .9s ease-in-out 0s 2}
</style>
</head>

<body>
<div class="wrap">
  <div class="panel">
    <h1>–†–µ–¥–∞–∫—Ç–æ—Ä ¬´–ù–∞–π–¥–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞¬ª</h1>

    <div class="row">
      <label>URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</label>
      <input id="imgUrl" type="text">
    </div>

    <div class="two">
      <div class="row">
        <label>–†–∞–∑–º–µ—Ä (px): <span id="sizeVal">46</span></label>
        <input id="size" type="range" min="18" max="220" value="46">
      </div>
      <div class="row">
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Ö–æ–¥–æ–∫</label>
        <input id="rounds" type="number" value="7">
      </div>
    </div>

    <div class="row">
      <label>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</label>
      <input id="taskText" type="text">
    </div>

    <div class="row">
      <label>–¢–µ–∫—Å—Ç –≤ –∫–æ–Ω—Ü–µ</label>
      <textarea id="endText"></textarea>
    </div>

    <div class="btns">
      <button class="b3" id="reset">–°–±—Ä–æ—Å</button>
      <button class="b1" id="getCode">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
      <button class="b2" id="copyCode">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
    </div>

    <div class="row">
      <label>HTML-–∫–æ–¥ –¥–ª—è Genially</label>
      <textarea id="code" class="codeBox"></textarea>
    </div>
  </div>

  <div class="stage" id="stage">
    <div class="progBadge" id="prog">0/7</div>
    <button class="hintBtn" id="hint">üí°</button>
    <div class="centerTask" id="task"></div>

    <div class="target fx-softfade" id="target">
      <img id="img">
    </div>
  </div>
</div>

<script>
const DEFAULT_URL =
  "https://propodgotovkaa-creator.github.io/babochka_2/babushka_2.png";

const $=id=>document.getElementById(id);

const imgUrl=$("imgUrl"), img=$("img"), target=$("target"),
      stage=$("stage"), size=$("size"), sizeVal=$("sizeVal"),
      rounds=$("rounds"), taskText=$("taskText"), endText=$("endText"),
      prog=$("prog"), hint=$("hint"), code=$("code");

let found=0, last=null, history=[];

function rect(){const r=stage.getBoundingClientRect();return{w:r.width,h:r.height}}
function setSize(v){target.style.width=target.style.height=v+"px";sizeVal.textContent=v}

function randomPos(){
  const {w,h}=rect(), s=target.offsetWidth;
  const x=Math.random()*(w-s), y=Math.random()*(h-s);
  return {x,y}
}

function place(){
  let p=randomPos();
  target.style.left=p.x+"px";
  target.style.top=p.y+"px";
}

function next(){
  if(found>=+rounds.value) return;
  place();
  prog.textContent=`${found}/${rounds.value}`;
}

target.onclick=()=>{
  found++; next();
}

hint.onclick=()=>{
  target.classList.remove("fx-hint");
  void target.offsetWidth;
  target.classList.add("fx-hint");
}

size.oninput=()=>{setSize(size.value);place()}

function reset(){
  found=0;history=[];
  img.src=imgUrl.value;
  setSize(size.value);
  next();
}

$("reset").onclick=reset;

$("getCode").onclick=()=>{
  code.value = `<div id="FX_ROOT">‚Ä¶</div>`;
}

$("copyCode").onclick=()=>navigator.clipboard.writeText(code.value);

// init
imgUrl.value = DEFAULT_URL;
img.src = DEFAULT_URL;
taskText.value = "–ù–∞–π–¥–∏ –±–∞–±–æ—á–∫—É –∏ –Ω–∞–∂–º–∏ –Ω–∞ –Ω–µ—ë!";
endText.value = "–ú–æ–ª–æ–¥–µ—Ü! –ü—Ä–∏—Ö–æ–¥–∏ –∏–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑ üòä";
reset();
</script>
</body>
</html>
